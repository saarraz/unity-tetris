---
id: We02v
name: How the Game Works
file_version: 1.0.2
app_version: 0.6.4-0
file_blobs:
  Assets/Scripts/GameController.cs: ccda2219453189e00044a19b138d9a963b7f7d02
  Assets/Scripts/Tetromino.cs: b2daa1225108e41de82b338bf315ff9bd25e7391
---

# The GameController Object

The GameController manages the state of the game, takes care of generating new Tetrominos when needed and eliminating rows of blocks after the Tetromino reaches the bottom.

<br/>

<!-- NOTE-swimm-snippet: the lines below link your snippet to Swimm -->
### ðŸ“„ Assets/Scripts/GameController.cs
```c#
â¬œ 7      using System.Linq;
â¬œ 8      using UnityEngine;
â¬œ 9      
ðŸŸ© 10     public class GameController : MonoBehaviour
â¬œ 11     {
â¬œ 12         public TetrominoGenerator? Generator;
â¬œ 13         public RowDetector[]? RowDetectors;
```

<br/>

# The Tetromino Object

`ðŸ“„ Assets/Scripts/Tetromino.cs` manages a single Tetromino from the time it is created and starts falling down until it reaches the bottom and decides it needs to "terminate", and lets the GameController know so it can break down the piece and generate a new one.

<br/>

<!-- NOTE-swimm-snippet: the lines below link your snippet to Swimm -->
### ðŸ“„ Assets/Scripts/Tetromino.cs
```c#
â¬œ 239            SoftTerminateTimer.Start();
â¬œ 240        }
â¬œ 241    
ðŸŸ© 242        // Terminate this tetromino, letting the GameController break it down and spawn another one.
ðŸŸ© 243        void Terminate()
ðŸŸ© 244        {
ðŸŸ© 245            Controller!.OnTetrominoTermination(this);
ðŸŸ© 246        }
â¬œ 247    
â¬œ 248        IEnumerator Rotate(Vector3 displacement)
â¬œ 249        {
```

<br/>

Every Tetromino is composed of 'blocks', and when it reaches the bottom - the GameController takes all those blocks and adds them under the GameController itself, so that the Tetromino loses its original shape and its blocks are now individual and can be eliminated independently.

<br/>

<!-- NOTE-swimm-snippet: the lines below link your snippet to Swimm -->
### ðŸ“„ Assets/Scripts/GameController.cs
```c#
â¬œ 100            CurrentTetrominoPrefab = null;
â¬œ 101            CurrentTetromino = null;
â¬œ 102        }
ðŸŸ© 103    
ðŸŸ© 104        public void DecomposeTetromino(Tetromino tetromino)
ðŸŸ© 105        {
ðŸŸ© 106            Transform[] blocks = (from Transform block in tetromino.Body!.transform select block).ToArray();
ðŸŸ© 107            foreach (Transform block in blocks)
ðŸŸ© 108            {
ðŸŸ© 109                block.SetParent(this.transform);
ðŸŸ© 110            }
ðŸŸ© 111            Destroy(tetromino.gameObject);
ðŸŸ© 112        }
â¬œ 113    
â¬œ 114        public IEnumerable<GameObject> AllBlocks()
â¬œ 115        {
```

<br/>

# Row Detector

`ðŸ“„ Assets/Scripts/RowDetector.cs` is responsible for detecting that a row of blocks has been laid down. Once that happens, it notifies the game controller, which then eliminates all blocks in that row.

The GameController has an array of RowDetectors, one for each row in the Tetris field.

<br/>

<!-- NOTE-swimm-snippet: the lines below link your snippet to Swimm -->
### ðŸ“„ Assets/Scripts/GameController.cs
```c#
â¬œ 10     public class GameController : MonoBehaviour
â¬œ 11     {
â¬œ 12         public TetrominoGenerator? Generator;
ðŸŸ© 13         public RowDetector[]? RowDetectors;
â¬œ 14         public GameObject? SavedTetrominoDisplay;
â¬œ 15         public GameObject? NextTetrominoPreviewDisplay;
â¬œ 16         public GameObject? JumpOutAnchor;
```

<br/>

This file was generated by Swimm. [Click here to view it in the app](https://app.swimm.io/repos/Z2l0aHViJTNBJTNBdW5pdHktdGV0cmlzJTNBJTNBc2FhcnJheg==/docs/We02v).